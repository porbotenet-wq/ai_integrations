# Workflow Engine ‚Äî –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## –ö–æ–Ω—Ü–µ–ø—Ü–∏—è
–®–∞–±–ª–æ–Ω workflow = —Ü–µ–ø–æ—á–∫–∞ —ç—Ç–∞–ø–æ–≤ (steps) —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞ ‚Äî –∏–Ω—Å—Ç–∞–Ω—Ü–∏—Ä—É–µ—Ç—Å—è workflow –∏–∑ —à–∞–±–ª–æ–Ω–∞.
–ö–∞–∂–¥—ã–π step –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —Ä–æ–ª–∏, –∏–º–µ–µ—Ç —Å—Ä–æ–∫ –∏ —Ç—Ä–∏–≥–≥–µ—Ä —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞.

## –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### workflow_templates
- id, name, description, phase (contract/design/supply/production/construction)
- created_at

### workflow_template_steps  
- id, template_id, step_number, name, description
- responsible_role (FK ‚Üí roles)
- duration_days (–ø–ª–∞–Ω–æ–≤–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
- depends_on_step_id (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –¥—Ä—É–≥–æ–≥–æ —à–∞–≥–∞)
- phase (contract/design/supply/production/construction/acceptance)
- auto_notify: bool (—É–≤–µ–¥–æ–º–ª—è—Ç—å –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏)

### workflow_instances
- id, object_id, template_id
- status (active/completed/paused)
- started_at, completed_at

### workflow_instance_steps
- id, instance_id, template_step_id
- assignee_id (FK ‚Üí users, –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å)
- status (pending/active/in_progress/review/done/blocked)
- planned_start, planned_end
- actual_start, actual_end
- notes
- created_at, updated_at

## –õ–æ–≥–∏–∫–∞ –±–æ—Ç–∞

### –î–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è –ø—Ä–æ–µ–∫—Ç–∞:
```
üìã –û–±—ä–µ–∫—Ç X ‚Üí üîÑ Workflow
  ‚îú‚îÄ‚îÄ –§–∞–∑–∞: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (3/11 –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)
  ‚îÇ   ‚îú‚îÄ‚îÄ ‚úÖ –ü–æ–ª—É—á–∏—Ç—å –¢–ó —Å–æ —à—Ç–∞–º–ø–æ–º
  ‚îÇ   ‚îú‚îÄ‚îÄ ‚úÖ –ü–æ–¥–ø–∏—Å–∞—Ç—å –ì–ü–† —Å –ø—Ä–æ–µ–∫—Ç–Ω—ã–º –æ—Ç–¥–µ–ª–æ–º
  ‚îÇ   ‚îú‚îÄ‚îÄ üîµ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –û–ü–† ‚Üê –¢–ï–ö–£–©–ò–ô (–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, 5 –¥–Ω.)
  ‚îÇ   ‚îú‚îÄ‚îÄ ‚¨ú –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Å –ø—Ä–æ–µ–∫—Ç–Ω—ã–º –∏–Ω—Å—Ç–∏—Ç—É—Ç–æ–º ‚Üê –∂–¥—ë—Ç –û–ü–†
  ‚îÇ   ‚îî‚îÄ‚îÄ ...
  ‚îú‚îÄ‚îÄ –§–∞–∑–∞: –°–Ω–∞–±–∂–µ–Ω–∏–µ (0/15)
  ‚îÇ   ‚îî‚îÄ‚îÄ ‚¨ú –í—Å–µ –æ–∂–∏–¥–∞—é—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
  ‚îî‚îÄ‚îÄ –§–∞–∑–∞: –ú–æ–Ω—Ç–∞–∂ (0/20)
      ‚îî‚îÄ‚îÄ ‚¨ú –í—Å–µ –æ–∂–∏–¥–∞—é—Ç –ø–æ—Å—Ç–∞–≤–∫–∏
```

### –ê–≤—Ç–æ–º–∞—Ç–∏–∫–∞:
1. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —à–∞–≥–∞ ‚Üí –∞–∫—Ç–∏–≤–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º—ã—Ö —à–∞–≥–æ–≤
2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–º—É –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
3. –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞ 1 –¥–µ–Ω—å –¥–æ –¥–µ–¥–ª–∞–π–Ω–∞
4. –≠—Å–∫–∞–ª–∞—Ü–∏—è –ø—Ä–∏ –ø—Ä–æ—Å—Ä–æ—á–∫–µ (1–¥ ‚Üí –†–ü, 3–¥ ‚Üí –¥–∏—Ä–µ–∫—Ç–æ—Ä)
5. –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø–æ —Ñ–∞–∑–∞–º –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ

## –§–∞–∑—ã –∏–∑ Excel

### 1. –î–æ–≥–æ–≤–æ—Ä–Ω–æ–π (8 —à–∞–≥–æ–≤)
- –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–∞ ‚Üí –ì–ü–† ‚Üí –ì—Ä–∞—Ñ–∏–∫–∏ –ø–æ –æ—Ç–¥–µ–ª–∞–º

### 2. –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (25 —à–∞–≥–æ–≤)  
- –û–ü–† ‚Üí –ö–ú ‚Üí –ö–ú–î ‚Üí –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚Üí –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è

### 3. –°–Ω–∞–±–∂–µ–Ω–∏–µ (15+ —à–∞–≥–æ–≤)
- –ó–∞—è–≤–∫–∏ ‚Üí –ü–æ—Å—Ç–∞–≤–∫–∏ (–ø—Ä–æ—Ñ–∏–ª—å, –∫—Ä–æ–Ω—à—Ç–µ–π–Ω—ã, —Å—Ç–µ–∫–ª–æ, —É—Ç–µ–ø–ª–∏—Ç–µ–ª—å...)

### 4. –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ (26 —à–∞–≥–æ–≤)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ö–ú–î ‚Üí –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ ‚Üí –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ ‚Üí –û—Ç–≥—Ä—É–∑–∫–∞

### 5. –ú–æ–Ω—Ç–∞–∂ + –°–¥–∞—á–∞ (20 —à–∞–≥–æ–≤)
- –ü–æ–¥–º–æ—Å—Ç–∏ ‚Üí –ö—Ä–æ–Ω—à—Ç–µ–π–Ω—ã ‚Üí –ö–∞—Ä–∫–∞—Å ‚Üí –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Üí –ê–û–°–† ‚Üí –°–¥–∞—á–∞
